(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{427:function(t,e,a){t.exports=a.p+"assets/img/05_autoscaling_02.bd604ee7.png"},485:function(t,e,a){"use strict";a.r(e);var o=a(32),s=Object(o.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"autoscaling"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#autoscaling"}},[t._v("#")]),t._v(" Autoscaling")]),t._v(" "),o("p",[t._v("Autoscaling can be configured on pods to enable OpenShift to add or remove pods as load varies. In general,\nthe Horizonal Pod Autoscaler sets:\n- Upper limit of pods\n- Lower limit of pods\n- Metric threshold to use for scaling tasks")]),t._v(" "),o("p",[t._v("Currently CPU and memory metrics are supported, with additional arbitrary metrics support intended for the future.")]),t._v(" "),o("h3",{attrs:{id:"autoscaling-pods"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#autoscaling-pods"}},[t._v("#")]),t._v(" Autoscaling Pods")]),t._v(" "),o("p",[t._v("This lab will provide a simple demonstration of autoscaling based on CPU, as this is configurable in the\nWeb Console.")]),t._v(" "),o("ul",[o("li",[t._v("First take some time to discover the configurable fields that belong to a HorizontalPodAutoscaler "),o("code",[t._v("oc explain HorizontalPodAutoscaler")])]),t._v(" "),o("li",[t._v("from the cli run")])]),t._v(" "),o("blockquote",[o("p",[t._v("You are configuring a very low CPU request target (such as 10%) so that you can test it easily by browsing the web application. In production the target would be closer to 70-80%")])]),t._v(" "),o("div",{staticClass:"language-oc:cli extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("oc -n [-dev] autoscale deployment/rocketchat-[username] --min 1 --max 10 --cpu-percent=10\n")])])]),o("ul",[o("li",[o("p",[t._v("Browse to the application to generate some load and monitor the behavior of the pods")])]),t._v(" "),o("li",[o("p",[t._v("Generate some activity such as creating messages, channels, etc.")]),t._v(" "),o("div",{staticClass:"language-oc:cli extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v('# update the URL below and grab a new integration URL\n# Open RocketChat, go to Adminstration > Integrations >  New Integration > Incoming WebHook\n#    Set "Enabled" to "true"\n#    Set "Post to Channel"  to "#general"\n#    Set "Post as"  as "rocket.cat"\n#    Click on "Save Changes" at the bottom\n#    Copy "Webhook URL" (see "COPY TO CLIPBOARD" button/link)\n#    Replace "https://rocketchat-[username]-[-dev].pathfinder.gov.bc.ca/hooks/<integration>/<token>" with the real roken.\n#    Make sure the domain matches the exposed route (no "localhost:3000")!!!\nprintf \'{"text":"Example message","attachments":[{"title":"Rocket.Chat","title_link":"https://rocket.chat","text":"Rocket.Chat, the best open source chat","image_url":"https://rocket.chat/images/mockup.png","color":"#764FA5"}]}\' > /tmp/rocketchat-post-msg.json && ab -p /tmp/rocketchat-post-msg.json -n 10000 -c 10 -T "application/json" [http://rocketchat-patricksimonian-ocp101-june-dev.apps.training-us.clearwater.devops.gov.bc.ca]/hooks/<integration>/<token>\n')])])])]),t._v(" "),o("li",[o("p",[t._v("Review the deployment config and try to add or remove replicas")])])]),t._v(" "),o("p",[o("img",{attrs:{src:a(427),alt:""}})]),t._v(" "),o("ul",[o("li",[t._v("Remove the autoscaler"),o("div",{staticClass:"language-oc:cli extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("oc -n [-dev] delete hpa/rocketchat-[username]\n")])])])])])])}),[],!1,null,null,null);e.default=s.exports}}]);