(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{451:function(e,t,a){e.exports=a.p+"assets/img/09_debugging_00.951dcc00.png"},452:function(e,t,a){e.exports=a.p+"assets/img/09_debugging_01.c8345812.png"},488:function(e,t,a){"use strict";a.r(t);var o=a(32),n=Object(o.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"debugging-containers"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#debugging-containers"}},[e._v("#")]),e._v(" Debugging Containers")]),e._v(" "),o("h3",{attrs:{id:"accessing-local-logs"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#accessing-local-logs"}},[e._v("#")]),e._v(" Accessing Local Logs")]),e._v(" "),o("p",[e._v("Logs of a running pod can be accessed from the Web Console or from the "),o("code",[e._v("oc")]),e._v(" cli:")]),e._v(" "),o("ul",[o("li",[e._v("The "),o("code",[e._v("Logs")]),e._v(" tab of any running pod can be used to view active logs for the current pod")])]),e._v(" "),o("p",[o("img",{attrs:{src:a(451),alt:""}})]),e._v(" "),o("ul",[o("li",[e._v("The "),o("code",[e._v("oc")]),e._v(" command can be used to view or tail the logs:")])]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("oc -n [-dev] logs -f <pod name>\n")])])]),o("p",[e._v("If there is more than one container in a given pod, the "),o("code",[e._v("-c <container-name>")]),e._v(" switch is used to specify the desired container logs.")]),e._v(" "),o("h3",{attrs:{id:"using-a-debug-container"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#using-a-debug-container"}},[e._v("#")]),e._v(" Using a Debug Container")]),e._v(" "),o("p",[o("strong",[e._v("Objective")]),e._v(": Create some error on app pod to start debugging:\nIn this lab, we will scale down the database deployment so that application pods will experience errors and crash.")]),e._v(" "),o("ul",[o("li",[e._v("Scale down database:"),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("oc -n [-dev] scale dc/mongodb-[username] --replicas=0\n")])])])]),e._v(" "),o("li",[e._v("Restart rocketchat:"),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("oc -n [-dev] rollout restart deployment/rocketchat-[username]\n")])])])]),e._v(" "),o("li",[e._v("Once the new pod starts, notice the CrashLoopBackOff")])]),e._v(" "),o("p",[o("img",{attrs:{src:a(452),alt:""}})]),e._v(" "),o("h4",{attrs:{id:"using-the-oc-command-to-start-a-debug-container"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#using-the-oc-command-to-start-a-debug-container"}},[e._v("#")]),e._v(" Using the "),o("code",[e._v("oc")]),e._v(" command to start a debug container")]),e._v(" "),o("ul",[o("li",[e._v("Find the name of a pod you would like to debug"),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("oc -n [-dev] pods\n")])])])]),e._v(" "),o("li",[e._v("Run the "),o("code",[e._v("oc debug")]),e._v(" command to start a debug pod (your output will vary)"),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("$ oc -n [-dev] debug <rocketchat-pod-name>\nDefaulting container name to rocketchat-shelly.\nUse 'oc describe pod/rocketchat-shelly-6-bm827-debug -n ocp101-june-dev' to see all of the containers in this pod.\n\nDebugging with pod/rocketchat-shelly-6-bm827-debug, original command: container-entrypoint node main.js\nWaiting for pod to start ...\nIf you don't see a command prompt, try pressing enter.\nsh-4.2$ \nsh-4.2$ \nsh-4.2$ exit\nexit\n\nRemoving debug pod ...\n")])])])])]),e._v(" "),o("h3",{attrs:{id:"rsh-and-rsync"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#rsh-and-rsync"}},[e._v("#")]),e._v(" RSH and RSYNC")]),e._v(" "),o("p",[e._v("RSH is available to all normal pods through the web console under the "),o("code",[e._v("Terminal")]),e._v(" tab, as well as through the\n"),o("code",[e._v("oc rsh")]),e._v(" command.")]),e._v(" "),o("ul",[o("li",[e._v("With your choice of access, rsh into one of the application pods and test access within the namespace\n"),o("ul",[o("li",[e._v("cURL internal and external resources")]),e._v(" "),o("li",[e._v("Test internal name resolution, external name resolution, etc.")]),e._v(" "),o("li",[e._v("Explore your userid")])])])]),e._v(" "),o("p",[e._v("RSYNC is also available in many pods, available through the "),o("code",[e._v("oc rsync")]),e._v(" command.")]),e._v(" "),o("ul",[o("li",[e._v("On the CLI, type "),o("code",[e._v("oc rsync -h")])]),e._v(" "),o("li",[e._v("Using this command, copy the contents of the mongo data directory to your local machine, or from your machine to the remote pod")])]),e._v(" "),o("h3",{attrs:{id:"port-forwarding"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#port-forwarding"}},[e._v("#")]),e._v(" Port Forwarding")]),e._v(" "),o("p",[e._v("The "),o("code",[e._v("oc port-forward")]),e._v(" command enables users to forward remote ports running in the cluster\ninto a local development machine.")]),e._v(" "),o("ul",[o("li",[e._v("Find your pod and use the port forward command")])]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("oc -n [-dev] get pods  | grep rocketchat-[username]\noc -n [-dev] port-forward [pod name from above] 8000:3000\n")])])]),o("ul",[o("li",[e._v("Navigate to http://127.0.0.1:8000")])])])}),[],!1,null,null,null);t.default=n.exports}}]);