<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Application Availability | CloudPathfinder</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/cloud-pathfinder/assets/css/0.styles.99d4fc2e.css" as="style"><link rel="preload" href="/cloud-pathfinder/assets/js/app.96a54537.js" as="script"><link rel="preload" href="/cloud-pathfinder/assets/js/2.d3a464d0.js" as="script"><link rel="preload" href="/cloud-pathfinder/assets/js/6.0d0efaf6.js" as="script"><link rel="prefetch" href="/cloud-pathfinder/assets/js/10.095acb71.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/11.6d6a1abe.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/12.f0de3fee.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/13.0ce2720e.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/14.3cf9561c.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/15.ec0a0693.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/16.50ca27e3.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/17.81f36780.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/18.f1876844.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/19.7319e060.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/20.1708edb7.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/21.2224ac7d.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/22.7d9c7809.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/23.9f8f99ca.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/24.c11f5a09.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/25.d4473883.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/26.1aec47fa.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/27.e63ef726.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/28.12b9b24b.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/29.f69607cf.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/3.ebc6acc6.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/30.31ec3804.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/31.94463cfb.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/32.55fb4bf9.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/33.3af83164.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/4.cd7d2295.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/5.a4fbdcdf.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/7.4a41db1a.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/8.827bf9e6.js"><link rel="prefetch" href="/cloud-pathfinder/assets/js/9.95b85cfd.js">
    <link rel="stylesheet" href="/cloud-pathfinder/assets/css/0.styles.99d4fc2e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cloud-pathfinder/" class="home-link router-link-active"><!----> <span class="site-name">CloudPathfinder</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/cloud-pathfinder/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Courses" class="dropdown-title"><span class="title">Courses</span> <span class="arrow down"></span></button> <button type="button" aria-label="Courses" class="mobile-dropdown-title"><span class="title">Courses</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          OpenShift
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/cloud-pathfinder/openshift101/" class="nav-link router-link-active">
  OpenShift101
</a></li><li class="dropdown-subitem"><a href="/cloud-pathfinder/openshift101/" class="nav-link router-link-active">
  OpenShift102
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/unoah/cloud-pathfinder" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CloudPathfinder
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/cloud-pathfinder/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Courses" class="dropdown-title"><span class="title">Courses</span> <span class="arrow down"></span></button> <button type="button" aria-label="Courses" class="mobile-dropdown-title"><span class="title">Courses</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          OpenShift
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/cloud-pathfinder/openshift101/" class="nav-link router-link-active">
  OpenShift101
</a></li><li class="dropdown-subitem"><a href="/cloud-pathfinder/openshift101/" class="nav-link router-link-active">
  OpenShift102
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/unoah/cloud-pathfinder" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CloudPathfinder
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>OpenShift 101</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cloud-pathfinder/openshift101/00_overview.html" class="sidebar-link">Overview</a></li><li><a href="/cloud-pathfinder/openshift101/01_setup.html" class="sidebar-link">Lab Setup</a></li><li><a href="/cloud-pathfinder/openshift101/01_adding_team_members.html" class="sidebar-link">Adding Team Members</a></li><li><a href="/cloud-pathfinder/openshift101/01b_web_console_overview.html" class="sidebar-link">OCP 4 Web Console</a></li><li><a href="/cloud-pathfinder/openshift101/02_builds.html" class="sidebar-link">Builds</a></li><li><a href="/cloud-pathfinder/openshift101/03_deployment.html" class="sidebar-link">Deployment</a></li><li><a href="/cloud-pathfinder/openshift101/04_configuring_deployments.html" class="sidebar-link">Exploring Deployment Options</a></li><li><a href="/cloud-pathfinder/openshift101/05_resource_management.html" class="sidebar-link">Resource Requests and Limits</a></li><li><a href="/cloud-pathfinder/openshift101/06_application_availability.html" aria-current="page" class="active sidebar-link">Application Availability</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/cloud-pathfinder/openshift101/07_autoscaling.html" class="sidebar-link">Autoscaling</a></li><li><a href="/cloud-pathfinder/openshift101/08_persistent_storage.html" class="sidebar-link">Persistent Storage</a></li><li><a href="/cloud-pathfinder/openshift101/09_persistent_configurations.html" class="sidebar-link">Persistent Configurations</a></li><li><a href="/cloud-pathfinder/openshift101/10_event_streams.html" class="sidebar-link">Event Streams</a></li><li><a href="/cloud-pathfinder/openshift101/11_debugging_containers.html" class="sidebar-link">Debugging Containers</a></li><li><a href="/cloud-pathfinder/openshift101/12_logging_and_visualizations.html" class="sidebar-link">Logging and Visualizations</a></li><li><a href="/cloud-pathfinder/openshift101/13_metrics.html" class="sidebar-link">Openshift 4 Metrics</a></li><li><a href="/cloud-pathfinder/openshift101/14_cheatsheet.html" class="sidebar-link">Cheatsheet</a></li><li><a href="/cloud-pathfinder/openshift101/15_pod_lifecycle.html" class="sidebar-link">Pod Lifecycle</a></li><li><a href="/cloud-pathfinder/openshift101/SUMMARY.html" class="sidebar-link">Summary</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="application-availability"><a href="#application-availability" class="header-anchor">#</a> Application Availability</h1> <p>Prior to beginning this lab, navigate to the public route you created and finish the initial setup of your application.
Ensure to select <code>Keep standlone</code> on the last page of the initial Rocket.Chat application setup.</p> <h3 id="single-pod-applications"><a href="#single-pod-applications" class="header-anchor">#</a> Single Pod Applications</h3> <p>Single pod applications are not highly-available and can be abruptly terminated if the pod crashes or due to regularly
scheduled platform maintenance. In order to simulate the effect on an application:</p> <ul><li>Navigate to the pod, select <code>Actions</code> and <code>Delete</code> <ul><li>Select <code>Delete pod immediately</code></li></ul></li></ul> <p><img src="/cloud-pathfinder/assets/img/04_app_availability_01.a9c54c0d.png" alt=""></p> <p><img src="/cloud-pathfinder/assets/img/04_app_availability_02.6f418cb7.png" alt=""></p> <ul><li>Refresh URL of application</li></ul> <p><img src="/cloud-pathfinder/assets/img/04_app_availability_03.8d09474a.png" alt=""></p> <h3 id="scaling-pods"><a href="#scaling-pods" class="header-anchor">#</a> Scaling Pods</h3> <p>To increase the availability of an application and defend against unplanned outages or planned maintenance tasks, an
application must have multiple pods/instance running. For this reason, stateless applications are desirable as they
do not require custom clustering configurations.</p> <p><strong>Note</strong> Stateful applications do not support &quot;scaling pods&quot; as a form of high availability. Such a stateful example
would be the mongodb database. For this reason, this lab focuses on the rocketchat application which will function
with multiple pods. Please refer to specific application documentaion for details on scalability support.</p> <ul><li>Navigate to <code>Topology</code> and scale your Deployment by selecting it and pressing <code>Actions &gt; Edit Count</code> and increasing the count to 2</li></ul> <p><img src="/cloud-pathfinder/assets/img/04_app_availability_05.64bae796.png" alt=""></p> <ul><li>Or from the CLI</li></ul> <div class="language-oc:cli extra-class"><pre class="language-text"><code>oc -n [-dev] scale deployment/rocketchat-[username] --replicas=2
</code></pre></div><ul><li><p>Notice the balancing across nodes by exploring the details of each pod
<img src="/cloud-pathfinder/assets/img/04_app_availability_06.f7171167.png" alt=""></p> <ul><li>Or from the CLI notice the hosts the pod runs on (in the last field)</li></ul> <div class="language-oc:cli extra-class"><pre class="language-text"><code>oc -n [-dev] get pods --field-selector=status.phase=Running -l deployment=rocketchat-[username] -o wide
</code></pre></div><p>you can also simply combine with grep:</p> <div class="language- extra-class"><pre class="language-text"><code>oc -n [-dev] get pods -o wide | grep rocketchat-[username]
</code></pre></div><ul><li>The output should look similar to this:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>rocketchat-[username]-7-k6kcc    1/1       Running   0          16m       172.51.68.135   training-aro-us-vmdqq-worker-westus22-kvjdt
rocketchat-[username]-7-k82w2    0/1       Running   0          1m        172.51.76.32    training-aro-us-vmdqq-worker-westus23-kvjdt
</code></pre></div></li> <li><p>Delete single pod, refresh the URL of application and notice that the application is served by the surviving pods</p> <div class="language-oc:cli extra-class"><pre class="language-text"><code>oc -n [-dev] get pods --field-selector=status.phase=Running -l deployment=rocketchat-[username] -o name | head -1 | xargs -I {} oc -n [-dev] delete {}

watch -dg -n 1 curl -fsSL http://rocketchat-[username]-[-dev].[namespace].apps.pathfinder.aro.devops.gov.bc.ca/api/info

# Notice that eventually your RocketChat will be back to having 2 pods
oc -n [-dev] get pods --field-selector=status.phase=Running -l deployment=rocketchat-[username]
</code></pre></div></li> <li><p>Perform deployment, refresh the URL of application and notice that the application is served by the surviving pods</p> <div class="language-oc:cli extra-class"><pre class="language-text"><code>oc -n [-dev] rollout latest deployment/rocketchat-[username]

# Monitor pods being created and deleted; and
watch -dg -n 1 -x oc -n [-dev] get pods -l deployment=rocketchat-[username]

# From another terminal, monitor RocketChat response
watch -dg -n 1 curl -fsSL http://rocketchat-[username]-[-dev].[namespace].apps.pathfinder.aro.devops.gov.bc.ca/api/info

</code></pre></div></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/cloud-pathfinder/openshift101/05_resource_management.html" class="prev">
        Resource Requests and Limits
      </a></span> <span class="next"><a href="/cloud-pathfinder/openshift101/07_autoscaling.html">
        Autoscaling
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/cloud-pathfinder/assets/js/app.96a54537.js" defer></script><script src="/cloud-pathfinder/assets/js/2.d3a464d0.js" defer></script><script src="/cloud-pathfinder/assets/js/6.0d0efaf6.js" defer></script>
  </body>
</html>
